<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.71.1"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Add New Model | DPsim</title><meta property="og:title" content="Add New Model"><meta property="og:description" content="Extending the simulator with new component or control models."><meta property="og:type" content="article"><meta property="og:url" content="https://dpsim.fein-aachen.org/docs/tasks/add-model/"><meta property="article:published_time" content="2020-03-17T00:00:00+00:00"><meta property="article:modified_time" content="2020-03-18T22:12:02+01:00"><meta property="og:site_name" content="DPsim"><meta itemprop=name content="Add New Model"><meta itemprop=description content="Extending the simulator with new component or control models."><meta itemprop=datePublished content="2020-03-17T00:00:00+00:00"><meta itemprop=dateModified content="2020-03-18T22:12:02+01:00"><meta itemprop=wordCount content="225"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Add New Model"><meta name=twitter:description content="Extending the simulator with new component or control models."><link rel=preload href=/scss/main.min.818a933df0186c907f1faea6730835dd5fa01c3b53af36bb68396dc80a2d3c45.css as=style><link href=/scss/main.min.818a933df0186c907f1faea6730835dd5fa01c3b53af36bb68396dc80a2d3c45.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><title>Add New Model | DPsim</title></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">DPsim</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav pt-2 pl-4" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a></li><ul><li class="collapse show" id=docs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/overview/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Overview</a></li><ul><li class=collapse id=docsoverview><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoverviewarchitecture href=/docs/overview/architecture/>Architecture</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoverviewattributes href=/docs/overview/attributes/>Attributes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoverviewscheduling href=/docs/overview/scheduling/>Scheduling</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/getting-started/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting Started</a></li><ul><li class=collapse id=docsgetting-started><a class="td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedbuild href=/docs/getting-started/build/>Build</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsgetting-starteddevelopment href=/docs/getting-started/development/>Development</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedinstall href=/docs/getting-started/install/>Install</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedreal-time href=/docs/getting-started/real-time/>Real-Time</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/concepts/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a></li><ul><li class=collapse id=docsconcepts><a class="td-sidebar-link td-sidebar-link__page" id=m-docsconceptsdyn-phasors href=/docs/concepts/dyn-phasors/>Dynamic Phasors</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconceptsnodal-analysis href=/docs/concepts/nodal-analysis/>Nodal Analysis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconceptspowerflow href=/docs/concepts/powerflow/>Powerflow</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/models/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Models</a></li><ul><li class=collapse id=docsmodels><a class="td-sidebar-link td-sidebar-link__page" id=m-docsmodelsbasic-elements href=/docs/models/basic-elements/>Basic Elements</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsmodelsbranches href=/docs/models/branches/>Branches</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsmodelsinduction-machine href=/docs/models/induction-machine/>Induction Machine</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsmodelssynchronous-generator href=/docs/models/synchronous-generator/>Synchronous Generator</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsmodelspower-electronics href=/docs/models/power-electronics/>VS-Inverter</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/tasks/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Core Tasks</a></li><ul><li class="collapse show" id=docstasks><a class="td-sidebar-link td-sidebar-link__page active" id=m-docstasksadd-model href=/docs/tasks/add-model/>Add New Model</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docstaskscreate-simulation href=/docs/tasks/create-simulation/>Create New Simulation</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docsexamples href=/docs/examples/>Examples</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docstutorials href=/docs/tutorials/>Tutorials</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsreference href=/docs/reference/>Reference</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelines href=/docs/contribution-guidelines/>Contribution Guidelines</a></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/dpsim-simulator/docs/edit/master/content/en/docs/Tasks/add-model.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/dpsim-simulator/docs/issues/new?title=Add%20New%20Model" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://git.rwth-aachen.de/acs/public/simulation/dpsim/dpsim/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><a href=#add-a-component-model>Add a Component Model</a><ul><li><a href=#c-oop>C++ OOP</a></li><li><a href=#directory--namespace-structure>Directory / Namespace Structure</a></li><li><a href=#attributes>Attributes</a></li><li><a href=#tasks-for-prepost-step-functions>Tasks for Pre/Post-step Functions</a></li><li><a href=#adding-the-new-component-to-dpsim>Adding the new Component to DPsim</a></li></ul></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://dpsim.fein-aachen.org/docs/>Documentation</a></li><li class=breadcrumb-item><a href=https://dpsim.fein-aachen.org/docs/tasks/>Core Tasks</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://dpsim.fein-aachen.org/docs/tasks/add-model/>Add New Model</a></li></ol></nav><div class=td-content><h1>Add New Model</h1><div class=lead>Extending the simulator with new component or control models.</div><h2 id=add-a-component-model>Add a Component Model</h2><p>In this section we will show the implementation of a new component model by means a three-phase dynamic phasor inductor model.</p><h3 id=c-oop>C++ OOP</h3><p>DPsim implements component models in a sub project called CPowerSystems (CPS) that is located in the <em>models</em> folder.
This folder is added to the DPsim CMake project.
Every component in DPsim is represented by a C++ class.</p><p>DPsim supports different types of solvers (MNA, DAE, NRP).
Each solver requires certain member functions in the component class to be implemented.
These functions are specified by the solver interface classes: <code>MNAInterface.h</code>, <code>DAEInterface.h</code>, etc.</p><h3 id=directory--namespace-structure>Directory / Namespace Structure</h3><p>For the implementation of the new component, we add two new files</p><ul><li><code>models/Source/DP/DP_Ph3_Inductor.cpp</code></li><li><code>models/Include/DP/DP_Ph3_Inductor.h</code></li></ul><p>In these files, we will implement a new C++ class with the name <code>CPS::DP::Ph3::Inductor</code>.
The general structure looks as follows.</p><p>Directories:</p><pre><code>DPsim
 |
 |- Source
 |- Include
  \ models
      |- Source
          |- DP
          |- EMT
          |- Static
            \ Signal
      |- Include
          |- DP
          |- EMT
          |- Static
            \ Signal
</code></pre><p>Namespaces:</p><pre><code>CPS::{DP,EMT,Static,Signal}::{Ph1,Ph3}::{Name}
</code></pre><h3 id=attributes>Attributes</h3><p>Each components has a list of attributes, which has to be specified when creating the components class.</p><p>TODO: explain attribute system</p><h3 id=tasks-for-prepost-step-functions>Tasks for Pre/Post-step Functions</h3><p>TODO: add example task dependency graph</p><h3 id=adding-the-new-component-to-dpsim>Adding the new Component to DPsim</h3><p>After finishing the implementation of the new component, it needs to be added to the following files:</p><ul><li><code>models/Include/cps/Components.h</code></li><li><code>models/Source/CMakeLists.txt</code></li><li><code>Sources/Python/Module.cpp</code></li></ul><div class="text-muted mt-5 pt-3 border-top">Last modified 18.03.2020: <a href=https://github.com/dpsim-simulator/docs/commit/c9a3de2ead5d28a965f2322cae15e2e684b79142>add initial content (c9a3de2)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://feinev.slack.com><i class="fab fa-slack"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="RWTH GitLab" aria-label="RWTH GitLab"><a class=text-white target=_blank href=https://git.rwth-aachen.de/acs/public/simulation/dpsim/dpsim><i class="fab fa-gitlab"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/DPsim-Simulator/dpsim><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://feinev.slack.com><i class="fab fa-slack"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2021 The DPsim Authors All Rights Reserved</small><p class=mt-2><a href=/about/>About DPsim</a></p></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.9727ddf6d3e2a36de5762932ccccea1f3d386238d03b97a8b5d1007aa41e7ce5.js integrity="sha256-lyfd9tPio23ldikyzMzqHz04YjjQO5eotdEAeqQefOU=" crossorigin=anonymous></script></body></html>